# 从地址到资源  
访问网站，无论你是自己手动输入网址，还是点击其他地方的链接，都是从url开始的：  
1. 输入url地址，
2. 本地浏览器根据网络配置的dns连接dns服务器，并将url发送过去解析
3. dns解析后，如果该网址在dns服务器上找到相关注册，则返回该网址真实的公网ip地址
4. 浏览器根据ip去访问该网站
5. 目标网站服务器，根据请求的路径，去处理该请求，并返回相应的资源
6. 浏览器根据返回的资源进行展示

# 从资源到网页  
当请求返回的资源是可以解析的类型时，浏览器会尝试解析该文件展示，而不是当作文件包下载到本地目录。  
当服务器返回html文件后，浏览器进入解析和渲染过程。
![webkit渲染引擎渲染流程](https://blog.shaoxi93.com/content/images/blogImgs/webkitflow.png)  


1. 浏览器得到的资源是一个html文件
2. head，根据标签的顺序加载脚本或者css文件，根据meta标签中的各种声明、可提供有关页面的元信息（meta-information）去定义页面的属性。因此head里的文件过大，或者js执行问题，会直接影响到后面dom的展示。
3. html解析**dom** 和css解析后的**cssom**共同生成了render tree，这时，已经能够知道有哪些节点、各个节点的CSS定义以及他们的从属关系
4. 根据render tree关系去生成真正的layout tree布局树
5. 根据layout tree 去进行最后的渲染和展示

  
# 重绘和重排（回流）
重排（回流）：当浏览器发现某个部分发生了点变化影响了布局，需要倒回去重新渲染，内行称这个回退的过程叫 reflow。reflow 会从 <html> 这个 root frame 开始递归往下，依次计算所有的结点几何尺寸和位置。  

重绘：改变某个元素的背景色、文字颜色、边框颜色等等不影响它周围或内部布局的属性时，屏幕的一部分要重画，但是元素的几何尺寸没有变。  

## 重排优化
就渲染过程优化，当页面dom需要交互情况，应尽量减少重排，当无法避免时，也可以做一些相应的渲染优化，例如：  
1. css的```display:none;```和```visibility```都能控制展示和隐藏，但是visibility会占据它原有的空间，这就意味着在展示和隐藏过程中，不会引起周围节点的重排，在不影响设计图的情况下可以通过这个属性减少重排
2. 对经常重排的元素，进行绝对定位，脱离文档流，当它自身发生改变时，就不会影响到周围元素
3. 对经常重排的元素存入变量
4. js控制dom样式时，尽可能不要一个样式一个样式改动，而是集合成一整个class进行添加，避免多次重排
5. 。。。


